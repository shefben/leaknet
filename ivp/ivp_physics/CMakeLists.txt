cmake_minimum_required( VERSION 3.20 FATAL_ERROR )

set( IVP_PHYSICS_SOURCE_FILES )
BEGIN_SRC( IVP_PHYSICS_SOURCE_FILES "Source Files" )
	SRC_GRP(
		SOURCES
		#{
			"${SRCDIR}/ivp/ivp_collision/ivp_3d_solver.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_longrange.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_lrange_hash.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_visualizer.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_visual_hash.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_collision_filter.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_coll_del_root_mindist.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_compact_ledge.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_compact_ledge_solver.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_i_collision_vhash.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_debug.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_event.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_mcases.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_minimize.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_recursive.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_oo_watcher.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_range_manager.cxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_ray_solver.cxx"

			"${SRCDIR}/ivp/ivp_controller/ivp_actuator.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_actuator_spring.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_buoyancy_solver.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_car_system.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint_car.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint_fixed_keyed.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint_local.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_airboat.cpp"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_buoyancy.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_floating.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_motion.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_raycast_car.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_stiff_spring.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_world_frict.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_forcefield.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_multidimensional_interp.cxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_template_constraint.cxx"

			"${SRCDIR}/ivp/ivp_intern/ivp_ball.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_calc_next_psi_solver.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_controller_phantom.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_core.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_environment.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_friction.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_friction_gaps.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_great_matrix.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_hull_manager.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_impact.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_i_friction_hash.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_i_object_vhash.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_merge_core.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_mindist_friction.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_object.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_object_attach.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_physic.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_physic_private.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_polygon.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_sim_unit.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_solver_core_reaction.cxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_time.cxx"

			"${SRCDIR}/ivp/ivp_physics/ivp_anomaly_manager.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_betterdebugmanager.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_betterstatisticsmanager.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_cache_object.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_liquid_surface_descript.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_material.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_performancecounter.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_stat_manager_cback_con.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_surface_manager.cxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_templates.cxx"

			"${SRCDIR}/ivp/ivp_surface_manager/ivp_compact_surface.cxx"
			"${SRCDIR}/ivp/ivp_surface_manager/ivp_gridbuild_array.cxx"
			"${SRCDIR}/ivp/ivp_surface_manager/ivp_surman_grid.cxx"
			"${SRCDIR}/ivp/ivp_surface_manager/ivp_surman_polygon.cxx"

			"${SRCDIR}/ivp/ivp_utility/ivu_active_value.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_bigvector.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_geometry.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_hash.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_memory.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_min_hash.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_min_list.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_os_dep.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_quat.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_string.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_types.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_vector.cxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_vhash.cxx"
		#}
	)
END_SRC( IVP_PHYSICS_SOURCE_FILES "Source Files" )

set( IVP_PHYSICS_HEADER_FILES )
BEGIN_SRC( IVP_PHYSICS_HEADER_FILES "Header Files" )
	SRC_GRP(
		SOURCES
		#{
			"${SRCDIR}/ivp/ivp_collision/ivp_3d_solver.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_cache_ledge_point.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_longrange.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_lrange_hash.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_visualizer.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_clustering_visual_hash.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_collision.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_collision_filter.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_compact_ledge.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_compact_ledge_solver.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_i_collision_vhash.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_listener_collision.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_event.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_intern.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_macros.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_mindist_minimize.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_range_manager.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_ray_solver.hxx"
			"${SRCDIR}/ivp/ivp_collision/ivp_universe_manager.hxx"

			"${SRCDIR}/ivp/ivp_controller/ivp_actuator.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_actuator_info.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_actuator_spring.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_attacher_to_cores.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_buoyancy_solver.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_car_system.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint_car.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint_fixed_keyed.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint_local.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_constraint_types.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_airboat.h"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_buoyancy.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_floating.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_golem.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_motion.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_raycast_car.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_stiff_spring.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_controller_world_frict.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_forcefield.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_multidimensional_interp.hxx"
			"${SRCDIR}/ivp/ivp_controller/ivp_template_constraint.hxx"

			"${SRCDIR}/ivp/ivp_intern/ivp_calc_next_psi_solver.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_friction.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_friction_solver.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_hull_manager_macros.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_impact.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_i_controller_vhash.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_i_friction_hash.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_i_object_vhash.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_merge_core.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_physic_private.hxx"
			"${SRCDIR}/ivp/ivp_intern/ivp_sim_unit.hxx"

			"${SRCDIR}/ivp/ivp_physics/ive_graphics.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_anomaly_manager.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_authenticity.hxx"
			#"${SRCDIR}/ivp/ivp_physics/ivp_auth_empty.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_ball.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_betterdebugmanager.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_betterstatisticsmanager.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_cache_object.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_contact_situation.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_core.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_core_macros.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_debug.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_debug_manager.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_environment.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_great_matrix.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_hull_manager.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_liquid_surface_descript.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_listener_hull.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_listener_object.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_listener_psi.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_material.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_object.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_object_attach.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_performancecounter.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_phantom.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_physics.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_polygon.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_radar.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_radar_appl.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_real_object.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_solver_core_reaction.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_stat_manager_cback_con.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_surface_manager.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_templates.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_time.hxx"
			"${SRCDIR}/ivp/ivp_physics/ivp_time_event.hxx"

			"${SRCDIR}/ivp/ivp_surface_manager/ivp_compact_grid.hxx"
			"${SRCDIR}/ivp/ivp_surface_manager/ivp_compact_surface.hxx"
			"${SRCDIR}/ivp/ivp_surface_manager/ivp_gridbuild_array.hxx"
			"${SRCDIR}/ivp/ivp_surface_manager/ivp_surman_grid.hxx"
			"${SRCDIR}/ivp/ivp_surface_manager/ivp_surman_polygon.hxx"

			"${SRCDIR}/ivp/ivp_utility/ivu_active_value.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_active_value_hash.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_bigvector.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_diff_hash.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_float.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_fvector.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_geometry.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_hash.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear_double.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear_macros.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear_piii.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear_ps2.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear_software.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_linear_willamette.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_list.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_mapping.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_matrix_macros.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_memory.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_min_hash.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_min_list.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_ps2.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_quat.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_set.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_string.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_string_hash.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_types.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_vector.hxx"
			"${SRCDIR}/ivp/ivp_utility/ivu_vhash.hxx"
		#}
	)
END_SRC( IVP_PHYSICS_HEADER_FILES "Header Files" )

add_object(
	TARGET ivp_physics
	STATIC
	PROPERTY_FOLDER "VPhysics//Static Libs"
	SOURCES ${IVP_PHYSICS_SOURCE_FILES} ${IVP_PHYSICS_HEADER_FILES}
)

target_precompile_headers(
	ivp_physics
	PRIVATE "ivp_physics.hxx"
)

target_include_directories(
	ivp_physics PRIVATE

	"${SRCDIR}/ivp/ivp_collision"
	"${SRCDIR}/ivp/ivp_controller"
	"${SRCDIR}/ivp/ivp_intern"
	"${SRCDIR}/ivp/ivp_physics"
	"${SRCDIR}/ivp/ivp_surface_manager"
	"${SRCDIR}/ivp/ivp_utility"
)

target_compile_definitions(
	ivp_physics PRIVATE

	IVP_VERSION_SDK
	HAVANA_CONSTRAINTS
	HAVOK_MOPP
)
